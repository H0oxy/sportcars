(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{38:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(30),r=n.n(s),i=(n(38),n(14)),l=n(15),o=n(17),u=n(16),d=(n(39),n(8)),j=n(2),h=n(0),b=function(e){var t,n,a,c=e.isAuthenticated,s=e.logout;return t="/login",n="login",c&&(t="/logout",n="logout",a=s),Object(h.jsxs)("header",{className:"navbar navbar-expand-lg navbar-dark bg-light bg-gragient",children:[Object(h.jsx)(d.b,{to:"/",className:"navbar-brand text-dark m-2",children:"Sportcars"}),Object(h.jsxs)("div",{className:"container-fluid",children:[Object(h.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(h.jsx)("span",{className:"navbar-toggler-icon"})}),Object(h.jsx)("div",{className:"collapse navbar-collapse",id:"navbarText",children:Object(h.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(d.b,{to:"/cars",className:"btn btn-outline-dark m-2",children:"Cars"})}),Object(h.jsx)("div",{className:"nav-item",children:Object(h.jsx)(d.b,{to:"/users",className:"btn btn-outline-dark m-2",children:"Users"})}),Object(h.jsx)("div",{className:"nav-item",children:Object(h.jsx)(d.b,{to:t,className:"btn btn-outline-dark m-2",onClick:a,children:n})})]})})]})]})},x=function(){return Object(h.jsx)("footer",{children:"\xa9 KPK, 2021"})},O=function(e){var t=e.car;return Object(h.jsxs)("tr",{className:"cars-list",children:[Object(h.jsx)("td",{children:t.id}),Object(h.jsx)("td",{children:t.car_brand}),Object(h.jsx)("td",{children:Object(h.jsx)(d.b,{to:"/car/detail/".concat(t.id),className:"nav-link",children:t.model})}),Object(h.jsx)("td",{children:t.price}),Object(h.jsx)("td",{children:t.max_speed}),Object(h.jsx)("td",{children:Object(h.jsx)(d.b,{to:"/cars/delete/".concat(t.id),className:"nav-link",children:"delete"})})]})},m=function(e){var t=e.cars;return Object(h.jsxs)("table",{className:"cars-list__table",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Manufacturer"}),Object(h.jsx)("th",{children:"Model"}),Object(h.jsx)("th",{children:"Price"}),Object(h.jsx)("th",{children:"Speed"})]})}),Object(h.jsx)("body",{children:t.map((function(e){return Object(h.jsx)(O,{car:e},e.id)}))})]})},f=function(e){var t=e.cars,n=e.users,a=Object(j.e)().id,c=t.filter((function(e){return e.id===+a}))[0],s=(n.find((function(e){return c.owner===e.id})),n.filter((function(e){return c.members.includes(e.id)})));return Object(h.jsxs)("div",{className:"car-detail",children:[Object(h.jsxs)("h2",{children:["car: ",c.name]}),Object(h.jsxs)("p",{children:["Created: ",c.model]}),Object(h.jsxs)("p",{children:["Updated: ",c.updated]}),Object(h.jsx)("h4",{children:"Members:"}),Object(h.jsx)("ul",{children:s.map((function(e){return Object(h.jsx)("li",{children:e.username},e.id)}))}),Object(h.jsxs)("p",{children:["Description: ",c.desc]})]})},g=function(e){var t=e.user;return Object(h.jsxs)("tr",{className:"user-row",children:[Object(h.jsx)("td",{children:t.id}),Object(h.jsx)("td",{children:t.username}),Object(h.jsx)("td",{children:t.date_birth})]})},v=function(e){var t=e.users;return Object(h.jsxs)("div",{className:"user-list",children:[Object(h.jsx)("h1",{children:"Users"}),Object(h.jsxs)("table",{className:"user-list__table",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"id"}),Object(h.jsx)("th",{children:"username"}),Object(h.jsx)("th",{children:"date birth"})]})}),Object(h.jsx)("tbody",{children:t.map((function(e){return Object(h.jsx)(g,{user:e},e.id)}))})]})]})},p=n(11),k=n.n(p),N=n(33),S=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={username:"",password:""},a}return Object(l.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(N.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.login(this.state.username,this.state.password)}},{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{className:"login-form",children:Object(h.jsxs)("form",{method:"post",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(h.jsx)("input",{type:"text",name:"username",placeholder:"username",onChange:function(t){return e.handleChange(t)}}),Object(h.jsx)("input",{type:"password",name:"password",placeholder:"password",onChange:function(t){return e.handleChange(t)}}),Object(h.jsx)("input",{type:"submit",value:"login"})]})})}}]),n}(c.a.Component),T=function(e){return"".concat("http://127.0.0.1:8000","/api/").concat(e,"/")},y=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={manufacturers:[],car:[],users:[],accessToken:a.getAccessToken()},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadState()}},{key:"loadState",value:function(){var e=this,t=this.getHeaders();k.a.get(T("users"),{headers:t}).then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)})),k.a.get(T("manufacturer"),{headers:t}).then((function(t){e.setState({manufacturers:t.data})})).catch((function(e){return console.log(e)})),k.a.get(T("car"),{headers:t}).then((function(t){e.setState({car:t.data})})).catch((function(e){return console.log(e)}))}},{key:"login",value:function(e,t){var n=this;k.a.post(T("token"),{username:e,password:t}).then((function(e){var t=e.data.refresh,a=e.data.access;n.saveTokens(t,a),n.setState({accessToken:a},n.loadState)})).catch((function(e){return console.log(e)}))}},{key:"logout",value:function(){localStorage.setItem("refreshToken",null),localStorage.setItem("accessToken",null),this.clearState()}},{key:"clearState",value:function(){this.setState({accessToken:null,users:[],manufacturer:[],car:[]})}},{key:"saveTokens",value:function(e,t){localStorage.setItem("refreshToken",e),localStorage.setItem("accessToken",t)}},{key:"getAccessToken",value:function(){return localStorage.getItem("accessToken")}},{key:"isAuthenticated",value:function(){return"null"!==this.state.accessToken&&null!==this.state.accessToken}},{key:"getHeaders",value:function(){var e={"Content-Type":"application/json"};return this.isAuthenticated()&&(e.Authorization="Bearer ".concat(this.state.accessToken)),e}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"main",children:[Object(h.jsxs)(d.a,{children:[Object(h.jsx)(b,{isAuthenticated:this.isAuthenticated(),logout:function(){return e.logout()}}),Object(h.jsx)(j.a,{exact:!0,path:"/users",children:Object(h.jsx)(v,{users:this.state.users})}),Object(h.jsx)(j.a,{exact:!0,path:"/cars",children:Object(h.jsx)(m,{cars:this.state.car})}),Object(h.jsx)(j.a,{exact:!0,path:"/cars/detail/:id",children:Object(h.jsx)(f,{cars:this.state.car})}),Object(h.jsx)(j.a,{exact:!0,path:"/login",children:Object(h.jsx)(S,{login:function(t,n){return e.login(t,n)}})})]}),Object(h.jsx)(x,{})]})}}]),n}(c.a.Component),C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(y,{})}),document.getElementById("root")),C()}},[[64,1,2]]]);
//# sourceMappingURL=main.17491c10.chunk.js.map