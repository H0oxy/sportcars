{"version":3,"sources":["components/Header.js","components/Footer.js","components/CarList.js","components/CarDetail.js","components/UserList.js","components/LoginForm.js","App.js","reportWebVitals.js","index.js"],"names":["Header","loginLink","loginTitle","loginHandler","isAuthenticated","logout","className","to","type","id","onClick","Footer","Car","car","car_brand","model","price","max_speed","CarList","cars","map","CarsDetail","users","useParams","filter","item","members","find","owner","includes","name","updated","username","desc","User","user","date_birth","UserList","LoginForm","props","state","password","event","this","setState","target","value","preventDefault","login","method","onSubmit","handleSubmit","placeholder","onChange","handleChange","React","Component","getResourceURL","suffix","App","manufacturers","accessToken","getAccessToken","loadState","headers","getHeaders","axios","get","then","result","data","catch","error","console","log","post","refreshToken","refresh","access","saveTokens","localStorage","setItem","clearState","manufacturer","getItem","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.17491c10.chunk.js","sourcesContent":["import {NavLink as Link} from \"react-router-dom\";\r\nimport React from \"react\";\r\n\r\nconst Header = ({isAuthenticated, logout}) => {\r\n    let loginLink, loginTitle, loginHandler;\r\n    loginLink = \"/login\";\r\n    loginTitle = \"login\";\r\n    if (isAuthenticated) {\r\n        loginLink = \"/logout\";\r\n        loginTitle = \"logout\";\r\n        loginHandler = logout;\r\n    }\r\n    return (\r\n\r\n        <header className=\"navbar navbar-expand-lg navbar-dark bg-light bg-gragient\">\r\n\r\n                        <Link to={\"/\"} className=\"navbar-brand text-dark m-2\">Sportcars</Link>\r\n                <div className=\"container-fluid\">\r\n\r\n                    <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\"\r\n                            data-bs-target=\"#navbarText\" aria-controls=\"navbarText\" aria-expanded=\"false\"\r\n                            aria-label=\"Toggle navigation\">\r\n                        <span className=\"navbar-toggler-icon\"></span>\r\n                    </button>\r\n                    <div className=\"collapse navbar-collapse\" id=\"navbarText\">\r\n                        <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\r\n                            <li className=\"nav-item\">\r\n\r\n                                <Link to={\"/cars\"} className=\"btn btn-outline-dark m-2\">Cars</Link>\r\n\r\n                            </li>\r\n                            <div className=\"nav-item\">\r\n                                <Link to={\"/users\"} className=\"btn btn-outline-dark m-2\">Users</Link>\r\n                            </div>\r\n                            <div className=\"nav-item\">\r\n\r\n                                <Link to={loginLink} className=\"btn btn-outline-dark m-2\" onClick={loginHandler}>{loginTitle}</Link>\r\n                            </div>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n        </header>\r\n\r\n    )\r\n}\r\n\r\nexport default Header;","const Footer = () => {\r\n    return (\r\n        <footer>\r\n            &copy; KPK, 2021\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer;","import {NavLink as Link} from \"react-router-dom\";\r\nimport React from \"react\";\r\n\r\nconst Car = ({car}) => {\r\n//{    console.log('car:', car);}\r\n    return (\r\n        <tr className=\"cars-list\">\r\n\r\n            <td>\r\n                {car.id}\r\n            </td>\r\n            <td>\r\n                {car.car_brand}\r\n            </td>\r\n            <td>\r\n\r\n                <Link to={`/car/detail/${car.id}`} className=\"nav-link\">\r\n                    {car.model}\r\n                </Link>\r\n            </td>\r\n            <td>\r\n                {car.price}\r\n            </td>\r\n            <td>\r\n                {car.max_speed}\r\n            </td>\r\n            <td>\r\n                <Link to={`/cars/delete/${car.id}`} className=\"nav-link\">\r\n                    delete\r\n                </Link>\r\n            </td>\r\n        </tr>\r\n    )\r\n}\r\n\r\nconst CarList = ({cars}) => {\r\n    // console.log('car:', cars);\r\n    return (\r\n        <table className={\"cars-list__table\"}>\r\n            <thead>\r\n            <tr>\r\n                <th>Manufacturer</th>\r\n                <th>Model</th>\r\n                <th>Price</th>\r\n                <th>Speed</th>\r\n            </tr>\r\n            </thead>\r\n            <body>\r\n            {cars.map((car) => <Car key={car.id} car={car}/>)}\r\n            </body>\r\n        </table>\r\n    )\r\n}\r\n\r\nexport default CarList;\r\n","import React from \"react\";\r\nimport {useParams} from \"react-router\";\r\n\r\nconst CarsDetail = ({cars, users}) => {\r\n    let {id} = useParams();\r\n    let car = cars.filter((item) => item.id === +id)[0];\r\n    // car = filter(cars, lambda item: item.id == int(id));\r\n    // console.log('this car:', car);\r\n    // console.log('users', users);\r\n    let owner = users.find((item) => car.owner === item.id);\r\n    // console.log('owner', owner);\r\n    let members = users.filter((item) => car.members.includes(item.id));\r\n    // console.log('members', members);\r\n\r\n    return (\r\n\r\n        <div className={\"car-detail\"}>\r\n            <h2>car: {car.name}</h2>\r\n            <p>Created: {car.model}</p>\r\n            <p>Updated: {car.updated}</p>\r\n            <h4>Members:</h4>\r\n            <ul>\r\n                {members.map((item) => (\r\n                    <li key={item.id}>{item.username}</li>\r\n                ))}\r\n            </ul>\r\n            <p>Description: {car.desc}</p>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default CarsDetail;","const User = ({user}) => {\r\n    // console.log('user:', user);\r\n    return (\r\n        <tr className=\"user-row\">\r\n            <td>\r\n                {user.id}\r\n            </td>\r\n            <td>\r\n                {user.username}\r\n            </td>\r\n            <td>\r\n                {user.date_birth}\r\n            </td>\r\n        </tr>\r\n    )\r\n}\r\n\r\n\r\nconst UserList = ({users}) => {\r\n    // console.log('users:', users);\r\n    return (\r\n        <div className=\"user-list\">\r\n            <h1>Users</h1>\r\n            <table className=\"user-list__table\">\r\n                <thead>\r\n                <tr>\r\n                    <th>id</th>\r\n                    <th>username</th>\r\n                    <th>date birth</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                {users.map((user) => <User key={user.id} user={user}/>)}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default UserList;","import React from \"react\";\r\n\r\n\r\nclass LoginForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\"\r\n        };\r\n    }\r\n\r\n    handleChange(event) {\r\n        // console.log('change:', event.target.name, event.target.value);\r\n        this.setState(\r\n            {[event.target.name]: event.target.value}\r\n        )\r\n\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        // console.log('submit:', event.target);\r\n        this.props.login(this.state.username, this.state.password);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"login-form\">\r\n                <form method=\"post\"\r\n                      onSubmit={(event) => this.handleSubmit(event)}>\r\n                    <input type=\"text\"\r\n                           name=\"username\"\r\n                           placeholder=\"username\"\r\n                           onChange={(event) => this.handleChange(event)}/>\r\n                    <input type=\"password\"\r\n                           name=\"password\"\r\n                           placeholder=\"password\"\r\n                           onChange={(event) => this.handleChange(event)}/>\r\n                    <input type=\"submit\"\r\n                           value=\"login\"/>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default LoginForm","import 'bootstrap/dist/css/bootstrap.min.css';\nimport React from 'react';\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\nimport Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\nimport CarsList from \"./components/CarList\";\nimport CarsDetail from \"./components/CarDetail\"\nimport UserList from \"./components/UserList\";\nimport axios from \"axios\";\nimport LoginForm from \"./components/LoginForm\";\n\nconst API_URL = \"http://127.0.0.1:8000\";\nconst getResourceURL = (suffix) => `${API_URL}/api/${suffix}/`;\n\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);  // parent constructor\n        this.state = {\n            manufacturers: [],\n            car: [],\n            users: [],\n            accessToken: this.getAccessToken(),\n\n        };\n    }\n\n\n    componentDidMount() {\n        this.loadState()\n    }\n\n\n    loadState() {\n        let headers = this.getHeaders();\n        // call rest API\n\n        axios\n            .get(getResourceURL(\"users\"), {headers: headers})\n            .then((result) => {\n                this.setState({\n                    users: result.data\n                })\n            })\n            .catch((error) => console.log(error));\n\n        axios\n            .get(getResourceURL(\"manufacturer\"), {headers: headers})\n            .then((result) => {\n                this.setState({\n                    manufacturers: result.data\n                })\n            })\n            .catch((error) => console.log(error));\n\n        axios\n            .get(getResourceURL(\"car\"), {headers: headers})\n            .then((result) => {\n                this.setState({\n                    car: result.data\n                })\n            })\n            .catch((error) => console.log(error));\n\n\n    }\n\n\n    login(username, password) {\n//        console.log('do login:', username, password,);\n        axios\n            .post(getResourceURL(\"token\"),\n                        {'username': username,'password': password})\n            .then((result) => {\n                let refreshToken = result.data.refresh;\n                let accessToken = result.data.access;\n\n                this.saveTokens(refreshToken, accessToken)\n                this.setState({accessToken: accessToken}, this.loadState)\n            })\n            .catch((error) => console.log(error));\n        }\n\n    logout() {\n            localStorage.setItem('refreshToken', null);\n            localStorage.setItem('accessToken', null);\n            this.clearState();\n    }\n\n    clearState() {\n        this.setState({\n        accessToken: null,\n        users: [],\n        manufacturer: [],\n        car: [],\n        });\n\n    }\n\n        saveTokens(refreshToken, accessToken) {\n            localStorage.setItem('refreshToken', refreshToken);\n            localStorage.setItem('accessToken', accessToken);\n//            console.log('accessToken:', localStorage.getItem('accessToken'), accessToken);\n        }\n\n        getAccessToken() {\n            return localStorage.getItem('accessToken')\n        }\n\n        isAuthenticated() {\n            return this.state.accessToken !== 'null' && this.state.accessToken !== null;\n        }\n\n        getHeaders() {\n            let headers = {\n                'Content-Type': \"application/json\"\n            }\n        if (this.isAuthenticated()) {\n               headers['Authorization'] = `Bearer ${this.state.accessToken}`\n        }\n        return headers;\n        }\n\n\n    render() {\n        //console.log('state', this.state);\n        return (\n            <div className=\"main\">\n                <Router>\n                    <Header isAuthenticated={this.isAuthenticated()}\n                        logout={() => this.logout()}/>\n\n                    <Route exact path=\"/users\">\n                        <UserList users={this.state.users}/>\n                    </Route>\n                    <Route exact path=\"/cars\">\n                        <CarsList cars={this.state.car}/>\n                    </Route>\n                    <Route exact path=\"/cars/detail/:id\">\n                        <CarsDetail cars={this.state.car}/>\n                    </Route>\n                    <Route exact path=\"/login\">\n                        <LoginForm\n                            login={(username, password) => this.login(username, password)}/>\n                    </Route>\n                </Router>\n                <Footer/>\n            </div>\n        )\n    }\n}\n\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App/>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}